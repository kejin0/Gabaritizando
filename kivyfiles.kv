#:import c kivy.utils.get_color_from_hex
#: import CardTransition kivy.uix.screenmanager.CardTransition

WindowManager:
    #Resultados
    #Prova1
    Inicial
    Comecar
    Prova1
    Prova2
    Finalizar
    Resultados

<Inicial>
    name:"pag1"
    size:root.size
    FloatLayout:
        Image:
            source:"iniciar.png"
            pos_hint:{"center_x":0.5,"y":0.02}
            size_hint:None,None
            size:'62dp','62dp'
        Iniciarprova:
            size:self.size
            on_release:
                app.root.current = "pag2"
                root.manager.transition.direction = "up"
                root.manager.transition.duration = .4

        Button:
            pos_hint:{"center_x":0.16,"y":.02}
            size_hint:None,None
            #text:"Resuma"
            background_color: 0,0,0,0
            size:"62dp","62dp"
            on_release:
                app.resume()
                if app.pode_resumir == True: \
                app.root.current = "pag3"; \
                root.manager.transition.duration = .4
                root.manager.transition = CardTransition()
            canvas.before:
                Rectangle:
                    size:self.size
                    pos:self.pos
                    source:"resume.png"

        Button:
            pos_hint:{"center_x":0.84,"y":.02}
            size_hint:None,None
            #text:"Config"
            background_color: 0,0,0,0
            size:"62dp","62dp"
            on_release:
                #app.root.current = "pag3"
                #root.manager.transition.duration = .4
                #root.manager.transition = CardTransition()
            canvas.before:
                Rectangle:
                    size:self.size
                    pos:self.pos
                    source:"config.png"




        Titulo:

        Estatisticas:

<Iniciarprova@Button>
    text:""
    pos_hint:{"center_x":0.5,"y":0.04}
    size_hint:None,None
    size:'62dp','62dp'
    background_color: 0,0,0,0



# Superior
<Estatisticas@FloatLayout>
    size_hint:.85,.3
    pos_hint:{"center_x":0.5,"y":0.6}
    canvas.before:
        Color:
            rgba: app.cor5
        RoundedRectangle:
            size:self.size
            pos:self.pos

    Textodesempenho:
        text:"Desempenho:"
        font_size:"25dp"
        size:self.width,"30dp"
        padding_x:"0dp"
        pos_hint:{"x":0.01,"top":0.98}
    Textodesempenho:
        text:app.celula1
        pos_hint:{"x":0.01,"top":0.8}
    Textodesempenho:
        text:app.celula2
        pos_hint:{"x":0.01,"top":0.68}
    Textodesempenho:
        text:app.celula3
        pos_hint:{"x":0.01,"top":0.56}
    Textodesempenho:
        text:app.celula4
        pos_hint:{"x":0.01,"top":0.44}
    Textodesempenho:
        text:app.celula5
        pos_hint:{"x":0.01,"top":0.32}
    Textodesempenho:
        text:app.celula6
        pos_hint:{"x":0.01,"top":0.20}

<Textodesempenho@Label>
    #text:"Enem 1° dia  --  (50/90) "
    font_size:"18dp"
    size_hint:.9,None
    size:self.width,"20dp"
    pos_hint:{"x":.1,"top":.8}
    text_size:self.size
    halign:"left"
    valign:"top"
    color: app.cor6
    padding_x:"20dp"
    #canvas.before:
        #Color:
           # rgba: c("a4a4a4")
       # RoundedRectangle:
         #   size:self.size
          #  pos:self.pos




<Titulo>
    Label:
        size:root.width,root.height * .1
        text:root.texto()
        color:app.cor5
        font_size:"25dp"
        pos_hint:{"x":.1}
        top:root.height
        text_size:self.size
        halign:"left"
        valign:"top"
        padding:"15dp"
        #canvas.before:
            #Color:
                #rgba: c("a4a4a4")
            #RoundedRectangle:
                #size:self.size
                #pos:self.pos

# Inferior



<Comecar>
    name:"pag2"
    canvas.before:
        Color:
            rgba: app.cor2
        Rectangle:
            size:self.size
            pos:self.pos
    FloatLayout:
        Titulo2
        Back:
            padding:"5dp"
            x:"4dp"
            top:root.height*.98
        Entradadetexto:
            text:app.nome
            id: text_input
            cursor_color:app.cor7
        Submit:
            on_release:
                root.erro()
                if text_input.text != "": \
                app.extrairnome(text_input.text);\
                app.root.current = "pag3"
                #root.manager.transition.direction = "up"
               # app.sumario_geral()

<Entradadetexto>
    size_hint:.5,None
    multiline: False
    height:"30dp"
    pos_hint:{"center_x":.5,"y":.8}
    background_normal: ""
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: app.cor7
        Rectangle:
            pos:self.x,self.y
            size:self.width,2



<Back@Widget>
    size:'50dp','50dp'
    size_hint:None,None
    Image:
        source:"back.png"
        pos:root.pos
        size_hint:None,None
        size:root.size
    Button:
        text:""
        size_hint:None,None
        pos:root.pos
        size:root.size
        background_color: 0,0,0,0
        size:self.size
        on_release:
            app.root.current = "pag1"
           # root.manager.transition.direction = "up"

<Titulo2@Widget>
    Label:
        size:root.width,root.height * .1
        text:"Nomeie sua prova:"
        color:app.cor7
        font_size:"25dp"
        center_x:root.width*.5
        top:root.height*.98
        padding:"15dp"

<Submit>
    id:botao_submit
    text:"Concluído!"
    size_hint:.3,.05
    pos_hint:{"center_x":.5,"y":.7}
    background_normal: ""
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: app.cor7
        RoundedRectangle:
            pos:self.x,self.y
            size:self.size
            radius: [22]

<Textinhodeerro>
    size_hint:None,None
    #size:root.width *.5,"50dp"
    size:"100dp","50dp"
    text:"Preencha o nome da prova."
    color: app.cor5
    font_size:"13dp"
    padding:"15dp"


<Prova1>
    name:"pag3"
    canvas.before:
        Color:
            rgba: app.cor3
        Rectangle:
            pos:self.pos
            size:self.size
    FloatLayout:
        Label:
            id: nome_prova
            text:app.nome
            color:app.cor8
            size_hint:1,None
            height:"30dp"
            pos_hint:{"center_x":.5,"top":1}
            background_normal: ""
            background_color: 0,0,0,0
            canvas.before:
                Color:
                    rgba: app.cor3
                Rectangle:
                    pos:self.x,self.y
                    size:self.size
        Sumario:
            id:sum_ario1
            size_hint: 1,None
            height:"120dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(30)
            canvas.before:
                Color:
                    rgba: app.cor9
                Rectangle:
                    pos:self.pos
                    size:self.size

        Indice:
            text:app.texto_indice
            color:app.cor3
            font_size:"25dp"
            size_hint: .6,None
            height:"50dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(158)
            canvas.before:
                Color:
                    rgba: app.cor4
                RoundedRectangle:
                    pos:self.pos
                    size:self.size
        Alternativas:
            size_hint: 1,None
            height:"520dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(200)
            orientation:"vertical"
            spacing:"28dp"
            padding:"28dp"
            Alternativa:
                text:"Alternativa a"
                canvas.before:
                    Color:
                        rgba: app.cora
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("a")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa b"
                canvas.before:
                    Color:
                        rgba: app.corb
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("b")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa c"
                canvas.before:
                    Color:
                        rgba: app.corc
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("c")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa d"
                canvas.before:
                    Color:
                        rgba: app.cord
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("d")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa e"
                canvas.before:
                    Color:
                        rgba: app.core
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("e")
                    app.ta_marcado()

        Rodape:
            size_hint: 1,None
            height:"80dp"
            pos_hint:{"center_x":.5,"y":0}
            canvas.before:
                Color:
                    rgba: app.cor9
                Rectangle:
                    pos:self.pos
                    size:self.size
            Button:
                text:"Concluído"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.5
                color:app.cor3
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    app.gab_oficial_entrada = 0
                    app.atualizar()
                    app.concluido()
                    app.root.current = "pag5"
                    root.manager.transition.direction = "up"
                    #root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1
                canvas.before:
                    Color:
                        rgba: app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]
            Button:
                text:"<"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.17
                color:app.cor3
                font_size:"30dp"
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    app.atualizar()
                    if app.indice_questao != 1: \
                    app.voltar(); \
                    app.root.current = "pag4"
                    root.manager.transition.direction = "right"
                    #root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1
                    app.ta_marcado()
                canvas.before:
                    Color:
                        rgba:app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]
            Button:
                text:">"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.83
                color:app.cor3
                font_size:"30dp"
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    app.atualizar()
                    root.manager.transition.direction = "left"
                    root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1

                    app.avancar()
                    app.root.current = "pag4"

                    app.ta_marcado()
                canvas.before:
                    Color:
                        rgba: app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]

<Prova2>
    name:"pag4"
    canvas.before:
        Color:
            rgba: app.cor3
        Rectangle:
            pos:self.pos
            size:self.size
    FloatLayout:
        Label:
            id: nome_prova
            text:app.nome
            color:app.cor8
            size_hint:1,None
            height:"30dp"
            pos_hint:{"center_x":.5,"top":1}
            background_normal: ""
            background_color: 0,0,0,0
            canvas.before:
                Color:
                    rgba: app.cor3
                Rectangle:
                    pos:self.x,self.y
                    size:self.size
        Sumario:
            id: sum_ario2
            size_hint: 1,None
            height:"120dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(30)
            orientation:"lr-tb"
            canvas.before:
                Color:
                    rgba: app.cor9
                Rectangle:
                    pos:self.pos
                    size:self.size



        Indice:
            text:app.texto_indice
            color:app.cor3
            font_size:"25dp"
            size_hint: .6,None
            height:"50dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(158)
            canvas.before:
                Color:
                    rgba: app.cor4
                RoundedRectangle:
                    pos:self.pos
                    size:self.size
        Alternativas:
            size_hint: 1,None
            height:"520dp"
            pos_hint:{"center_x":.5}
            top:root.height - app.dpforpx(200)
            orientation:"vertical"
            spacing:"28dp"
            padding:"28dp"
            Alternativa:
                text:"Alternativa a"
                canvas.before:
                    Color:
                        rgba: app.cora
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("a")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa b"
                canvas.before:
                    Color:
                        rgba: app.corb
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("b")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa c"
                canvas.before:
                    Color:
                        rgba: app.corc
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("c")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa d"
                canvas.before:
                    Color:
                        rgba: app.cord
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("d")
                    app.ta_marcado()
            Alternativa:
                text:"Alternativa e"
                canvas.before:
                    Color:
                        rgba: app.core
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[28]
                on_release:
                    app.assinalar("e")
                    app.ta_marcado()

        Rodape:
            size_hint: 1,None
            height:"80dp"
            pos_hint:{"center_x":.5,"y":0}
            canvas.before:
                Color:
                    rgba: app.cor9
                Rectangle:
                    pos:self.pos
                    size:self.size
            Button:
                text:"Concluído"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.5
                color:app.cor3
                font_size:"15dp"
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    app.atualizar()
                    app.gab_oficial_entrada = 0
                    app.root.current = "pag5"
                    root.manager.transition.direction = "up"
                    #root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1
                canvas.before:
                    Color:
                        rgba: app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]
            Button:
                text:"<"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.17
                color:app.cor3
                font_size:"30dp"
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    if app.indice_questao != 1: \
                    app.voltar(); \
                    app.atualizar()
                    app.root.current = "pag3"
                    root.manager.transition.direction = "right"
                    #root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1
                    app.ta_marcado()
                canvas.before:
                    Color:
                        rgba: app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]
            Button:
                text:">"
                size_hint:None,None
                size:root.width*.28,"50dp"
                y:"10dp"
                center_x:root.width*.83
                color:app.cor3
                font_size:"30dp"
                text_size:self.size
                halign:"center"
                valign:"center"
                padding_x:"10dp"
                background_color:0,0,0,0
                on_release:
                    app.atualizar()
                    app.avancar()
                    app.root.current = "pag3"
                    root.manager.transition.direction = "left"
                    #root.manager.transition = CardTransition()
                    root.manager.transition.duration = .1
                    app.ta_marcado()
                canvas.before:
                    Color:
                        rgba: app.cor5
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius:[12]



<Sumario>
    #ordem left,top,right,bottom
   # padding:"10dp","2dp","10dp","2dp"
    #spacing:"1dp"


<Botao_do_sumario>
    size_hint:.0545,None
    height:"22dp"
    color: app.cor4
    font_size:"13dp"
    halign:"center"
    valign:"center"
    text_size:self.size
    background_color:0,0,0,0
    on_release:
        app.ir(self.text)
        app.root.current = app.definir(app.root.current)




<Indice@Label>

<Rodape@Widget>

<Alternativas@BoxLayout>
   # canvas.before:
        #Color:
         #   rgba: c("#ccfff7")
        #Rectangle:
         #   pos:self.pos
         # size:self.size

<Alternativa>
    color:app.cor3
    font_size:"20dp"
    text_size:self.size
    halign:"left"
    valign:"center"
    padding_x:"10dp"
    background_color:0,0,0,0
    on_release:
        app.ta_marcado()



<Finalizar@Screen>
    name:"pag5"
    canvas.before:
        Color:
            rgba: app.cor1
        Rectangle:
            pos:self.pos
            size:self.size
    FloatLayout:
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.5,"top":.98}
            text:"Gabarito oficial:"
            color:app.cor5
            font_size:"25dp"
            padding:"15dp"
        Entradadetexto:
            text:app.gab_oficial_entrada
            id:entrada_gab
        Label:
            size_hint:None,None
            size:root.width *.5,"50dp"
            pos_hint:{"center_x":.5,"top":.78}
            text:"Exemplo: abcdadedabacdaeeda.\nsem espaços entre as respostas.\nse houver alguma anulada ponha X\nno gabarito.\nnão insira numeros."
            color: app.cor10
            font_size:"11dp"
            padding:"15dp"
        Label:
            size_hint:None,None
            size: "40dp","40dp"
            pos_hint:{"center_x":.85,"y":.8}
            text:app.tamanho(entrada_gab.text)
            color:app.cor5
            font_size:"18dp"
            padding:"15dp"
            canvas.before:
                Color:
                    rgba: app.cor10
                Rectangle:
                    pos:self.pos
                    size:self.size
        Button:
            id:botao_submit1
            text:"Concluído!"
            size_hint:.3,.05
            pos_hint:{"center_x":.5,"y":.63}
            background_normal: ""
            background_color: 0,0,0,0
            on_release:
                app.root.current = "pag6"
                app.correcao()
                app.salvar_como_concluido()
            canvas.before:
                Color:
                    rgba: app.cor7
                RoundedRectangle:
                    pos:self.x,self.y
                    size:self.size
                    radius: [22]





<Resultados@Screen>
    name: "pag6"
    canvas.before:
        Color:
            rgba: app.cor1
        Rectangle:
            pos:self.pos
            size:self.size
    FloatLayout:
        Label:
            size_hint:1,.05
            pos_hint:{"center_x":.5,"top":1}
            text:"Resultados:"
            color:app.cor5
            font_size:"25dp"
            padding:"15dp"
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.25,"top":.97}
            text:"Questões incorretas:"
            color:app.cor5
            font_size:"18dp"
            padding:"15dp"
        Label:
            text: app.gabarito_incorreto_formatado
            size_hint:.5,1
            pos_hint:{"center_x":.25,"top":.92}
            color:app.cor5
            font_size:"15dp"
            padding:"15dp"
            halign:"left"
            valign:"top"
            text_size:self.size
            #canvas.before:
                #Color:
                    #rgba: c("#FFFFFF")
                #Rectangle:
                    #pos:self.pos
                    #size:self.size
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.75,"top":.97}
            text:"Numeros de acertos:"
            color:app.cor5
            font_size:"18dp"
            padding:"15dp"
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.75,"top":.94}
            text:app.numero_de_acertos_formatado
            color:app.cor5
            font_size:"18dp"
            padding:"15dp"
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.75,"top":.84}
            text:"nome da prova:"
            color:app.cor5
            font_size:"18dp"
            padding:"15dp"
        Label:
            size_hint:1,.1
            pos_hint:{"center_x":.75,"top":.81}
            text:app.nome
            color:app.cor5
            font_size:"14dp"
            padding:"15dp"
        Button
            id:botao_submit2
            text:"Finalizar"
            size_hint:.3,.05
            pos_hint:{"center_x":.5,"y":.1}
            background_normal: ""
            background_color: 0,0,0,0
            on_release:
                app.root.current = "pag1"
                app.resetar()
            canvas.before:
                Color:
                    rgba: app.cor7
                RoundedRectangle:
                    pos:self.x,self.y
                    size:self.size
                    radius: [22]
        Button
            id:botao_submit2
            text:"Editar gabarito"
            size_hint:.3,.05
            pos_hint:{"center_x":.5,"y":.19}
            background_normal: ""
            background_color: 0,0,0,0
            on_release:
                app.root.current = "pag5"
            canvas.before:
                Color:
                    rgba: app.cor7
                RoundedRectangle:
                    pos:self.x,self.y
                    size:self.size
                    radius: [22]